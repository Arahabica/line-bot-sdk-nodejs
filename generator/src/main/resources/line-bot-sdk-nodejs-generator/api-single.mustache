{{>licenseInfo}}

/* tslint:disable:no-unused-locals */
{{#imports}}
import { {{classname}} } from '{{filename}}';
{{/imports}}
import * as Types from "../../types";
import {ensureJSON} from "../../utils";
import {Readable} from "stream";

import { RequestFile } from '../../http';
import HTTPClient from "../../http";

// ===============================================
// This file is autogenerated - Please do not edit
// ===============================================

{{#operations}}

interface httpClientConfig {
    baseURL?: string;
    // TODO support defaultHeaders?
}


export class {{classname}} {
    private httpClient: HTTPClient;

    constructor(config: httpClientConfig = {}) {
        if (!config.baseURL) {
            config.baseURL = '{{#lambda.endpoint}}{{classname}}{{/lambda.endpoint}}';
        }
        this.httpClient = new HTTPClient(config);
    }

{{#operation}}
    /**
     * {{&notes}}
     {{#summary}}
     * @summary {{&summary}}
     {{/summary}}
     {{#allParams}}
     * @param {{paramName}} {{description}}
     {{/allParams}}
     */
    public async {{nickname}}({{#allParams}}{{paramName}}{{^required}}?{{/required}}: {{{dataType}}}, {{/allParams}}) : Promise<{{#returnType}}{{{.}}}{{/returnType}}{{^returnType}}Types.MessageAPIResponseBase{{/returnType}}> {
        {{>apiBody/multipart}}
        {{^isMultipart}}

        {{#hasBodyParam}}
        const params = {{bodyParam.paramName}};
        {{/hasBodyParam}}

        {{#hasFormParams}}
        const params = {}; // form params
        {{#formParams}}
        params["{{{paramName}}}"] = {{{paramName}}};
        {{/formParams}}
        {{/hasFormParams}}

        {{#hasQueryParams}}
        const params = {}; // form params
        {{#queryParams}}
        params["{{{paramName}}}"] = {{{paramName}}};
        {{/queryParams}}
        {{/hasQueryParams}}

        {{#vendorExtensions.isStream}}
        return this.httpClient.{{#lambda.lower}}{{{httpMethod}}}{{/lambda.lower}}Stream("{{{path}}}"{{#lambda.pathReplace}}{{{path}}}{{/lambda.pathReplace}});
        {{/vendorExtensions.isStream}}
        {{^vendorExtensions.isStream}}
        const res = this.httpClient.{{#lambda.lower}}{{{httpMethod}}}{{/lambda.lower}}{{#hasFormParams}}Form{{/hasFormParams}}{{#isMultipart}}Multipart{{/isMultipart}}{{#returnType}}<{{{.}}}>{{/returnType}}(
            "{{{path}}}"{{#lambda.pathReplace}}{{{path}}}{{/lambda.pathReplace}},
            {{#hasBodyParam}}params,{{/hasBodyParam}}
            {{#hasFormParams}}params,{{/hasFormParams}}
            {{#hasQueryParams}}params,{{/hasQueryParams}}
        );
        return ensureJSON(res);
        {{/vendorExtensions.isStream}}
        {{/isMultipart}}
    }
{{/operation}}
}
{{/operations}}
